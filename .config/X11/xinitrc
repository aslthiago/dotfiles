#!/bin/sh

#
# .xinitrc - X Window System initialization script
#

# Set file paths for user modmap, system resources, and system modmap
usermodmap=$HOME/.Xmodmap
sysresources=/etc/X11/xinit/.Xresources
sysmodmap=/etc/X11/xinit/.Xmodmap

# Merge system Xresources and apply modmap files if they exist
[[ -f $sysresources ]] && xrdb -merge $sysresources
[[ -f $sysmodmap ]] && xmodmap $sysmodmap
[[ -f $usermodmap ]] && xmodmap $usermodmap

# Execute scripts in the xinitrc.d directory if it exists
if [ -d /etc/X11/xinit/xinitrc.d ] ; then
  for f in /etc/X11/xinit/xinitrc.d/?*.sh ; do
    [ -x "$f" ] && . "$f"
  done
  unset f
fi

# ------------------------------------------------------------------------------

# Set keyboard layout to US
setxkbmap us

# Enable numlock on startup
numlockx

# Configure displays: eDP1 (primary), HDMI1 (secondary) off
xrandr --output eDP1 --auto --output HDMI1 --off

# Enable the compositor for window transparency and effects
picom -f &

# Adjust the screen's color temperature based on the location
redshift -l -22.37:-43.16 &

# Automatically hide the mouse cursor after 5 seconds of inactivity
unclutter --timeout 5 &

# Set the background image using xwallpaper
xwallpaper --zoom $WALLPAPER/default

# Continuously update root window name every 1 minute
while true; do
  xsetroot -name "$(date "+%F %R")"
  sleep 1m
done &

# Execute the window manager
exec dwm
